{"ast":null,"code":"/**\n * \n * @file Timeline component\n * @author Box\n */\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport PlainButton from '../../../../components/plain-button/PlainButton';\nimport IconTrackNext from '../../../../icons/general/IconTrackNext';\nimport IconTrackPrevious from '../../../../icons/general/IconTrackPrevious';\nimport messages from '../../../common/messages';\nimport { SKILLS_TARGETS } from '../../../common/interactionTargets';\nimport Timeslice from './Timeslice';\nimport { isValidStartTime } from '../transcript/timeSliceUtils';\nimport './Timeline.scss';\nvar Timeline = function Timeline(_ref) {\n  var _ref$text = _ref.text,\n    text = _ref$text === void 0 ? '' : _ref$text,\n    _ref$duration = _ref.duration,\n    duration = _ref$duration === void 0 ? 0 : _ref$duration,\n    _ref$timeslices = _ref.timeslices,\n    timeslices = _ref$timeslices === void 0 ? [] : _ref$timeslices,\n    getViewer = _ref.getViewer,\n    interactionTarget = _ref.interactionTarget;\n  var timeSliceIndex = -1;\n  var playSegment = function playSegment(index) {\n    var incr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var newIndex = incr > 0 ? Math.min(timeslices.length - 1, index + incr) : Math.max(0, index + incr);\n    var viewer = getViewer ? getViewer() : null;\n    var timeslice = timeslices[newIndex];\n    var validTime = isValidStartTime(timeslice);\n    if (validTime && viewer && typeof viewer.play === 'function') {\n      viewer.play(timeslice.start);\n      timeSliceIndex = newIndex;\n    }\n  };\n  return React.createElement(\"div\", {\n    className: \"be-timeline\"\n  }, text && React.createElement(\"div\", {\n    className: \"be-timeline-label\"\n  }, text), React.createElement(\"div\", {\n    className: \"be-timeline-line-wrapper\"\n  }, React.createElement(\"div\", {\n    className: \"be-timeline-line\"\n  }), timeslices.map(function (_ref2, index) {\n    var start = _ref2.start,\n      end = _ref2.end;\n    return (/* eslint-disable react/no-array-index-key */\n      React.createElement(Timeslice, {\n        key: index,\n        duration: duration,\n        end: end,\n        index: index,\n        interactionTarget: interactionTarget,\n        onClick: playSegment,\n        start: start\n      })\n    );\n  }\n  /* eslint-enable react/no-array-index-key */)), React.createElement(\"div\", {\n    className: \"be-timeline-btns\"\n  }, React.createElement(PlainButton, {\n    \"data-resin-target\": SKILLS_TARGETS.TIMELINE.PREVIOUS,\n    onClick: function onClick() {\n      return playSegment(timeSliceIndex, -1);\n    },\n    type: \"button\"\n  }, React.createElement(IconTrackPrevious, {\n    title: React.createElement(FormattedMessage, messages.previousSegment)\n  })), React.createElement(PlainButton, {\n    \"data-resin-target\": SKILLS_TARGETS.TIMELINE.NEXT,\n    onClick: function onClick() {\n      return playSegment(timeSliceIndex, 1);\n    },\n    type: \"button\"\n  }, React.createElement(IconTrackNext, {\n    title: React.createElement(FormattedMessage, messages.nextSegment)\n  }))));\n};\nexport default Timeline;","map":{"version":3,"sources":["../../../../../src/elements/content-sidebar/skills/timeline/Timeline.js"],"names":["React","FormattedMessage","PlainButton","IconTrackNext","IconTrackPrevious","messages","SKILLS_TARGETS","Timeslice","isValidStartTime","Timeline","text","duration","timeslices","getViewer","interactionTarget","timeSliceIndex","playSegment","index","incr","newIndex","Math","min","length","max","viewer","timeslice","validTime","play","start","map","end","TIMELINE","PREVIOUS","previousSegment","NEXT","nextSegment"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Timeline component\n * @author Box\n */\n\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport PlainButton from '../../../../components/plain-button/PlainButton';\nimport IconTrackNext from '../../../../icons/general/IconTrackNext';\nimport IconTrackPrevious from '../../../../icons/general/IconTrackPrevious';\nimport messages from '../../../common/messages';\nimport { SKILLS_TARGETS } from '../../../common/interactionTargets';\nimport Timeslice from './Timeslice';\nimport { isValidStartTime } from '../transcript/timeSliceUtils';\nimport type { SkillCardEntryTimeSlice, SkillCardEntryType } from '../../../../common/types/skills';\n\nimport './Timeline.scss';\n\ntype Props = {\n    duration?: number,\n    getViewer?: Function,\n    interactionTarget: string,\n    text?: string,\n    timeslices?: SkillCardEntryTimeSlice[],\n    type?: SkillCardEntryType,\n    url?: string,\n};\n\nconst Timeline = ({ text = '', duration = 0, timeslices = [], getViewer, interactionTarget }: Props) => {\n    let timeSliceIndex = -1;\n\n    const playSegment = (index: number, incr: number = 0) => {\n        const newIndex = incr > 0 ? Math.min(timeslices.length - 1, index + incr) : Math.max(0, index + incr);\n        const viewer = getViewer ? getViewer() : null;\n        const timeslice = timeslices[newIndex];\n        const validTime = isValidStartTime(timeslice);\n\n        if (validTime && viewer && typeof viewer.play === 'function') {\n            viewer.play(timeslice.start);\n            timeSliceIndex = newIndex;\n        }\n    };\n\n    return (\n        <div className=\"be-timeline\">\n            {text && <div className=\"be-timeline-label\">{text}</div>}\n            <div className=\"be-timeline-line-wrapper\">\n                <div className=\"be-timeline-line\" />\n                {timeslices.map(\n                    ({ start, end }: SkillCardEntryTimeSlice, index) => (\n                        /* eslint-disable react/no-array-index-key */\n                        <Timeslice\n                            key={index}\n                            duration={duration}\n                            end={end}\n                            index={index}\n                            interactionTarget={interactionTarget}\n                            onClick={playSegment}\n                            start={start}\n                        />\n                    ),\n                    /* eslint-enable react/no-array-index-key */\n                )}\n            </div>\n            <div className=\"be-timeline-btns\">\n                <PlainButton\n                    data-resin-target={SKILLS_TARGETS.TIMELINE.PREVIOUS}\n                    onClick={() => playSegment(timeSliceIndex, -1)}\n                    type=\"button\"\n                >\n                    <IconTrackPrevious title={<FormattedMessage {...messages.previousSegment} />} />\n                </PlainButton>\n                <PlainButton\n                    data-resin-target={SKILLS_TARGETS.TIMELINE.NEXT}\n                    onClick={() => playSegment(timeSliceIndex, 1)}\n                    type=\"button\"\n                >\n                    <IconTrackNext title={<FormattedMessage {...messages.nextSegment} />} />\n                </PlainButton>\n            </div>\n        </div>\n    );\n};\n\nexport default Timeline;\n"]},"metadata":{},"sourceType":"module"}