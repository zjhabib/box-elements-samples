{"ast":null,"code":"import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '@formatjs/intl-localematcher';\nimport { SetNumberFormatUnitOptions } from './SetNumberFormatUnitOptions';\nimport { CurrencyDigits } from './CurrencyDigits';\nimport { SetNumberFormatDigitOptions } from './SetNumberFormatDigitOptions';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nimport { GetNumberOption } from '../GetNumberOption';\nimport { GetStringOrBooleanOption } from '../GetStringOrBooleanOption';\nvar VALID_ROUND_INCREMENT_VALUES = [1, 2, 5, 10, 20, 25, 50, 100, 200, 250, 500, 1000, 2000];\n/**\n * https://tc39.es/ecma402/#sec-initializenumberformat\n */\nexport function InitializeNumberFormat(nf, locales, opts, _a) {\n  var getInternalSlots = _a.getInternalSlots,\n    localeData = _a.localeData,\n    availableLocales = _a.availableLocales,\n    numberingSystemNames = _a.numberingSystemNames,\n    getDefaultLocale = _a.getDefaultLocale,\n    currencyDigitsData = _a.currencyDigitsData;\n  // @ts-ignore\n  var requestedLocales = CanonicalizeLocaleList(locales);\n  var options = CoerceOptionsToObject(opts);\n  var opt = Object.create(null);\n  var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n  opt.localeMatcher = matcher;\n  var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n  if (numberingSystem !== undefined && numberingSystemNames.indexOf(numberingSystem) < 0) {\n    // 8.a. If numberingSystem does not match the Unicode Locale Identifier type nonterminal,\n    // throw a RangeError exception.\n    throw RangeError(\"Invalid numberingSystems: \".concat(numberingSystem));\n  }\n  opt.nu = numberingSystem;\n  var r = ResolveLocale(availableLocales, requestedLocales, opt,\n  // [[RelevantExtensionKeys]] slot, which is a constant\n  ['nu'], localeData, getDefaultLocale);\n  var dataLocaleData = localeData[r.dataLocale];\n  invariant(!!dataLocaleData, \"Missing locale data for \".concat(r.dataLocale));\n  var internalSlots = getInternalSlots(nf);\n  internalSlots.locale = r.locale;\n  internalSlots.dataLocale = r.dataLocale;\n  internalSlots.numberingSystem = r.nu;\n  internalSlots.dataLocaleData = dataLocaleData;\n  SetNumberFormatUnitOptions(nf, options, {\n    getInternalSlots: getInternalSlots\n  });\n  var style = internalSlots.style;\n  var mnfdDefault;\n  var mxfdDefault;\n  if (style === 'currency') {\n    var currency = internalSlots.currency;\n    var cDigits = CurrencyDigits(currency, {\n      currencyDigitsData: currencyDigitsData\n    });\n    mnfdDefault = cDigits;\n    mxfdDefault = cDigits;\n  } else {\n    mnfdDefault = 0;\n    mxfdDefault = style === 'percent' ? 0 : 3;\n  }\n  var notation = GetOption(options, 'notation', 'string', ['standard', 'scientific', 'engineering', 'compact'], 'standard');\n  internalSlots.notation = notation;\n  SetNumberFormatDigitOptions(internalSlots, options, mnfdDefault, mxfdDefault, notation);\n  var roundingIncrement = GetNumberOption(options, 'roundingIncrement', 1, 5000, 1);\n  if (VALID_ROUND_INCREMENT_VALUES.indexOf(roundingIncrement) === -1) {\n    throw new RangeError(\"Invalid rounding increment value: \".concat(roundingIncrement, \".\\nValid values are \").concat(VALID_ROUND_INCREMENT_VALUES, \".\"));\n  }\n  if (roundingIncrement !== 1 && internalSlots.roundingType !== 'fractionDigits') {\n    throw new TypeError(\"For roundingIncrement > 1 only fractionDigits is a valid roundingType\");\n  }\n  if (roundingIncrement !== 1 && internalSlots.maximumFractionDigits !== internalSlots.minimumFractionDigits) {\n    throw new RangeError('With roundingIncrement > 1, maximumFractionDigits and minimumFractionDigits must be equal.');\n  }\n  internalSlots.roundingIncrement = roundingIncrement;\n  var trailingZeroDisplay = GetOption(options, 'trailingZeroDisplay', 'string', ['auto', 'stripIfInteger'], 'auto');\n  internalSlots.trailingZeroDisplay = trailingZeroDisplay;\n  var compactDisplay = GetOption(options, 'compactDisplay', 'string', ['short', 'long'], 'short');\n  var defaultUseGrouping = 'auto';\n  if (notation === 'compact') {\n    internalSlots.compactDisplay = compactDisplay;\n    defaultUseGrouping = 'min2';\n  }\n  internalSlots.useGrouping = GetStringOrBooleanOption(options, 'useGrouping', ['min2', 'auto', 'always'], 'always', false, defaultUseGrouping);\n  internalSlots.signDisplay = GetOption(options, 'signDisplay', 'string', ['auto', 'never', 'always', 'exceptZero', 'negative'], 'auto');\n  internalSlots.roundingMode = GetOption(options, 'roundingMode', 'string', ['ceil', 'floor', 'expand', 'trunc', 'halfCeil', 'halfFloor', 'halfExpand', 'halfTrunc', 'halfEven'], 'halfExpand');\n  return nf;\n}","map":{"version":3,"names":["CanonicalizeLocaleList","GetOption","ResolveLocale","SetNumberFormatUnitOptions","CurrencyDigits","SetNumberFormatDigitOptions","invariant","CoerceOptionsToObject","GetNumberOption","GetStringOrBooleanOption","VALID_ROUND_INCREMENT_VALUES","InitializeNumberFormat","nf","locales","opts","_a","getInternalSlots","localeData","availableLocales","numberingSystemNames","getDefaultLocale","currencyDigitsData","requestedLocales","options","opt","Object","create","matcher","localeMatcher","numberingSystem","undefined","indexOf","RangeError","concat","nu","r","dataLocaleData","dataLocale","internalSlots","locale","style","mnfdDefault","mxfdDefault","currency","cDigits","notation","roundingIncrement","roundingType","TypeError","maximumFractionDigits","minimumFractionDigits","trailingZeroDisplay","compactDisplay","defaultUseGrouping","useGrouping","signDisplay","roundingMode"],"sources":["/Users/zhabib/Documents/GitHub/box-elements-samples/demo-box-metadata-views/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/InitializeNumberFormat.js"],"sourcesContent":["import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '@formatjs/intl-localematcher';\nimport { SetNumberFormatUnitOptions } from './SetNumberFormatUnitOptions';\nimport { CurrencyDigits } from './CurrencyDigits';\nimport { SetNumberFormatDigitOptions } from './SetNumberFormatDigitOptions';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nimport { GetNumberOption } from '../GetNumberOption';\nimport { GetStringOrBooleanOption } from '../GetStringOrBooleanOption';\nvar VALID_ROUND_INCREMENT_VALUES = [\n    1, 2, 5, 10, 20, 25, 50, 100, 200, 250, 500, 1000, 2000,\n];\n/**\n * https://tc39.es/ecma402/#sec-initializenumberformat\n */\nexport function InitializeNumberFormat(nf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, availableLocales = _a.availableLocales, numberingSystemNames = _a.numberingSystemNames, getDefaultLocale = _a.getDefaultLocale, currencyDigitsData = _a.currencyDigitsData;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = CoerceOptionsToObject(opts);\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined &&\n        numberingSystemNames.indexOf(numberingSystem) < 0) {\n        // 8.a. If numberingSystem does not match the Unicode Locale Identifier type nonterminal,\n        // throw a RangeError exception.\n        throw RangeError(\"Invalid numberingSystems: \".concat(numberingSystem));\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, \n    // [[RelevantExtensionKeys]] slot, which is a constant\n    ['nu'], localeData, getDefaultLocale);\n    var dataLocaleData = localeData[r.dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \".concat(r.dataLocale));\n    var internalSlots = getInternalSlots(nf);\n    internalSlots.locale = r.locale;\n    internalSlots.dataLocale = r.dataLocale;\n    internalSlots.numberingSystem = r.nu;\n    internalSlots.dataLocaleData = dataLocaleData;\n    SetNumberFormatUnitOptions(nf, options, { getInternalSlots: getInternalSlots });\n    var style = internalSlots.style;\n    var mnfdDefault;\n    var mxfdDefault;\n    if (style === 'currency') {\n        var currency = internalSlots.currency;\n        var cDigits = CurrencyDigits(currency, { currencyDigitsData: currencyDigitsData });\n        mnfdDefault = cDigits;\n        mxfdDefault = cDigits;\n    }\n    else {\n        mnfdDefault = 0;\n        mxfdDefault = style === 'percent' ? 0 : 3;\n    }\n    var notation = GetOption(options, 'notation', 'string', ['standard', 'scientific', 'engineering', 'compact'], 'standard');\n    internalSlots.notation = notation;\n    SetNumberFormatDigitOptions(internalSlots, options, mnfdDefault, mxfdDefault, notation);\n    var roundingIncrement = GetNumberOption(options, 'roundingIncrement', 1, 5000, 1);\n    if (VALID_ROUND_INCREMENT_VALUES.indexOf(roundingIncrement) === -1) {\n        throw new RangeError(\"Invalid rounding increment value: \".concat(roundingIncrement, \".\\nValid values are \").concat(VALID_ROUND_INCREMENT_VALUES, \".\"));\n    }\n    if (roundingIncrement !== 1 &&\n        internalSlots.roundingType !== 'fractionDigits') {\n        throw new TypeError(\"For roundingIncrement > 1 only fractionDigits is a valid roundingType\");\n    }\n    if (roundingIncrement !== 1 &&\n        internalSlots.maximumFractionDigits !== internalSlots.minimumFractionDigits) {\n        throw new RangeError('With roundingIncrement > 1, maximumFractionDigits and minimumFractionDigits must be equal.');\n    }\n    internalSlots.roundingIncrement = roundingIncrement;\n    var trailingZeroDisplay = GetOption(options, 'trailingZeroDisplay', 'string', ['auto', 'stripIfInteger'], 'auto');\n    internalSlots.trailingZeroDisplay = trailingZeroDisplay;\n    var compactDisplay = GetOption(options, 'compactDisplay', 'string', ['short', 'long'], 'short');\n    var defaultUseGrouping = 'auto';\n    if (notation === 'compact') {\n        internalSlots.compactDisplay = compactDisplay;\n        defaultUseGrouping = 'min2';\n    }\n    internalSlots.useGrouping = GetStringOrBooleanOption(options, 'useGrouping', ['min2', 'auto', 'always'], 'always', false, defaultUseGrouping);\n    internalSlots.signDisplay = GetOption(options, 'signDisplay', 'string', ['auto', 'never', 'always', 'exceptZero', 'negative'], 'auto');\n    internalSlots.roundingMode = GetOption(options, 'roundingMode', 'string', [\n        'ceil',\n        'floor',\n        'expand',\n        'trunc',\n        'halfCeil',\n        'halfFloor',\n        'halfExpand',\n        'halfTrunc',\n        'halfEven',\n    ], 'halfExpand');\n    return nf;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}