{"ast":null,"code":"import React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray50 } from '../../styles/variables';\nimport messages from '../common/messages';\nimport { PERMISSION_CAN_DOWNLOAD, PERMISSION_CAN_RENAME, PERMISSION_CAN_DELETE, PERMISSION_CAN_SHARE, PERMISSION_CAN_PREVIEW, TYPE_FILE, TYPE_WEBLINK } from '../../constants';\nimport './MoreOptionsCell.scss';\nvar MoreOptions = function MoreOptions(_ref) {\n  var canPreview = _ref.canPreview,\n    canShare = _ref.canShare,\n    canDownload = _ref.canDownload,\n    canDelete = _ref.canDelete,\n    canRename = _ref.canRename,\n    onItemSelect = _ref.onItemSelect,\n    onItemDelete = _ref.onItemDelete,\n    onItemDownload = _ref.onItemDownload,\n    onItemRename = _ref.onItemRename,\n    onItemShare = _ref.onItemShare,\n    onItemPreview = _ref.onItemPreview,\n    isSmall = _ref.isSmall,\n    item = _ref.item;\n  var onFocus = function onFocus() {\n    return onItemSelect(item);\n  };\n  var onDelete = function onDelete() {\n    return onItemDelete(item);\n  };\n  var onDownload = function onDownload() {\n    return onItemDownload(item);\n  };\n  var onRename = function onRename() {\n    return onItemRename(item);\n  };\n  var onShare = function onShare() {\n    return onItemShare(item);\n  };\n  var onPreview = function onPreview() {\n    return onItemPreview(item);\n  };\n  var permissions = item.permissions,\n    type = item.type;\n  if (!permissions) {\n    return React.createElement(\"span\", null);\n  }\n  var allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n  var allowOpen = type === TYPE_WEBLINK;\n  var allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n  var allowShare = canShare && permissions[PERMISSION_CAN_SHARE];\n  var allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n  var allowDownload = canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n  var allowed = allowDelete || allowRename || allowDownload || allowPreview || allowShare || allowOpen;\n  if (!allowed) {\n    return React.createElement(\"span\", null);\n  }\n  return React.createElement(\"div\", {\n    className: \"bce-more-options\"\n  }, React.createElement(DropdownMenu, {\n    constrainToScrollParent: true,\n    isRightAligned: true\n  }, React.createElement(Button, {\n    className: \"bce-btn-more-options\",\n    \"data-testid\": \"bce-btn-more-options\",\n    onFocus: onFocus,\n    type: \"button\"\n  }, React.createElement(IconEllipsis, {\n    color: bdlGray50,\n    height: 10,\n    width: 16\n  })), React.createElement(Menu, null, allowPreview && React.createElement(MenuItem, {\n    onClick: onPreview\n  }, React.createElement(FormattedMessage, messages.preview)), allowOpen && React.createElement(MenuItem, {\n    onClick: onPreview\n  }, React.createElement(FormattedMessage, messages.open)), allowDelete && React.createElement(MenuItem, {\n    onClick: onDelete\n  }, React.createElement(FormattedMessage, messages.delete)), allowDownload && React.createElement(MenuItem, {\n    onClick: onDownload\n  }, React.createElement(FormattedMessage, messages.download)), allowRename && React.createElement(MenuItem, {\n    onClick: onRename\n  }, React.createElement(FormattedMessage, messages.rename)), allowShare && React.createElement(MenuItem, {\n    onClick: onShare\n  }, React.createElement(FormattedMessage, messages.share)))), allowShare && !isSmall && React.createElement(Button, {\n    onClick: onShare,\n    onFocus: onFocus,\n    type: \"button\"\n  }, React.createElement(FormattedMessage, messages.share)));\n};\nexport default MoreOptions;","map":{"version":3,"sources":["../../../src/elements/content-explorer/MoreOptions.js"],"names":["React","FormattedMessage","Button","DropdownMenu","Menu","MenuItem","Browser","IconEllipsis","bdlGray50","messages","PERMISSION_CAN_DOWNLOAD","PERMISSION_CAN_RENAME","PERMISSION_CAN_DELETE","PERMISSION_CAN_SHARE","PERMISSION_CAN_PREVIEW","TYPE_FILE","TYPE_WEBLINK","MoreOptions","canPreview","canShare","canDownload","canDelete","canRename","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","isSmall","item","onFocus","onDelete","onDownload","onRename","onShare","onPreview","permissions","type","allowPreview","allowOpen","allowDelete","allowShare","allowRename","allowDownload","isMobile","allowed","preview","open","delete","download","rename","share"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray50 } from '../../styles/variables';\nimport messages from '../common/messages';\nimport {\n    PERMISSION_CAN_DOWNLOAD,\n    PERMISSION_CAN_RENAME,\n    PERMISSION_CAN_DELETE,\n    PERMISSION_CAN_SHARE,\n    PERMISSION_CAN_PREVIEW,\n    TYPE_FILE,\n    TYPE_WEBLINK,\n} from '../../constants';\n\nimport type { CommonGridViewFunctions } from './flowTypes';\nimport type { BoxItem } from '../../common/types/core';\nimport './MoreOptionsCell.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    isSmall: boolean,\n    item: BoxItem,\n    ...$Exact<CommonGridViewFunctions>,\n};\n\nconst MoreOptions = ({\n    canPreview,\n    canShare,\n    canDownload,\n    canDelete,\n    canRename,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    isSmall,\n    item,\n}: Props) => {\n    const onFocus = () => onItemSelect(item);\n    const onDelete = () => onItemDelete(item);\n    const onDownload = () => onItemDownload(item);\n    const onRename = () => onItemRename(item);\n    const onShare = () => onItemShare(item);\n    const onPreview = () => onItemPreview(item);\n\n    const { permissions, type } = item;\n\n    if (!permissions) {\n        return <span />;\n    }\n\n    const allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n    const allowOpen = type === TYPE_WEBLINK;\n    const allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n    const allowShare = canShare && permissions[PERMISSION_CAN_SHARE];\n    const allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n    const allowDownload =\n        canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n    const allowed = allowDelete || allowRename || allowDownload || allowPreview || allowShare || allowOpen;\n\n    if (!allowed) {\n        return <span />;\n    }\n    return (\n        <div className=\"bce-more-options\">\n            <DropdownMenu constrainToScrollParent isRightAligned>\n                <Button\n                    className=\"bce-btn-more-options\"\n                    data-testid=\"bce-btn-more-options\"\n                    onFocus={onFocus}\n                    type=\"button\"\n                >\n                    <IconEllipsis color={bdlGray50} height={10} width={16} />\n                </Button>\n                <Menu>\n                    {allowPreview && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.preview} />\n                        </MenuItem>\n                    )}\n                    {allowOpen && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.open} />\n                        </MenuItem>\n                    )}\n                    {allowDelete && (\n                        <MenuItem onClick={onDelete}>\n                            <FormattedMessage {...messages.delete} />\n                        </MenuItem>\n                    )}\n                    {allowDownload && (\n                        <MenuItem onClick={onDownload}>\n                            <FormattedMessage {...messages.download} />\n                        </MenuItem>\n                    )}\n                    {allowRename && (\n                        <MenuItem onClick={onRename}>\n                            <FormattedMessage {...messages.rename} />\n                        </MenuItem>\n                    )}\n                    {allowShare && (\n                        <MenuItem onClick={onShare}>\n                            <FormattedMessage {...messages.share} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </DropdownMenu>\n            {allowShare && !isSmall && (\n                <Button onClick={onShare} onFocus={onFocus} type=\"button\">\n                    <FormattedMessage {...messages.share} />\n                </Button>\n            )}\n        </div>\n    );\n};\n\nexport default MoreOptions;\n"]},"metadata":{},"sourceType":"module"}