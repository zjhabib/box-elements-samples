{"ast":null,"code":"var _errorMap;\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport * as React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport TextInput from '../../components/text-input/TextInput';\nimport commonMessages from '../../common/messages';\nimport messages from './messages';\nvar VALUE_MISSING = 'valueMissing';\nvar TYPE_MISMATCH = 'typeMismatch';\nvar errorMap = (_errorMap = {}, _defineProperty(_errorMap, VALUE_MISSING, React.createElement(FormattedMessage, commonMessages.requiredFieldError)), _defineProperty(_errorMap, TYPE_MISMATCH, React.createElement(FormattedMessage, commonMessages.invalidURLError)), _errorMap);\nvar EditableURL = /*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditableURL, _React$Component);\n  function EditableURL() {\n    var _getPrototypeOf2;\n    var _this;\n    _classCallCheck(this, EditableURL);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditableURL)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      error: '',\n      value: _this.props.value\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function () {\n      if (!_this.inputEl) {\n        return;\n      }\n      var _this$inputEl$validit = _this.inputEl.validity,\n        valid = _this$inputEl$validit.valid,\n        valueMissing = _this$inputEl$validit.valueMissing;\n      if (!valid) {\n        _this.setState({\n          error: valueMissing ? VALUE_MISSING : TYPE_MISMATCH\n        });\n        return;\n      }\n      _this.props.onValidURLChange(_this.state.value);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      _this.setState({\n        value: event.currentTarget.value\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleFocus\", function () {\n      _this.setState({\n        error: ''\n      });\n    });\n    return _this;\n  }\n  _createClass(EditableURL, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref) {\n      var prevValue = _ref.value;\n      var value = this.props.value;\n      if (prevValue !== value) {\n        this.setState({\n          value: value\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var formatMessage = this.props.intl.formatMessage;\n      var _this$state = this.state,\n        error = _this$state.error,\n        value = _this$state.value;\n      return React.createElement(TextInput, {\n        className: \"url-input\",\n        error: error ? errorMap[error] : undefined,\n        hideLabel: true,\n        inputRef: function inputRef(ref) {\n          _this2.inputEl = ref;\n        },\n        isRequired: true,\n        label: formatMessage(messages.url),\n        onBlur: this.handleBlur,\n        onChange: this.handleChange,\n        onFocus: this.handleFocus,\n        placeholder: formatMessage(messages.urlPlaceholder),\n        type: \"url\",\n        value: value\n      });\n    }\n  }]);\n  return EditableURL;\n}(React.Component);\nexport { EditableURL as EditableURLBase, VALUE_MISSING, TYPE_MISMATCH };\nexport default injectIntl(EditableURL);","map":{"version":3,"sources":["../../../src/features/item-details/EditableURL.js"],"names":["React","FormattedMessage","injectIntl","TextInput","commonMessages","messages","VALUE_MISSING","TYPE_MISMATCH","errorMap","requiredFieldError","invalidURLError","EditableURL","Component","error","value","props","prevValue","setState","inputEl","valid","valueMissing","validity","onValidURLChange","state","event","currentTarget","intl","formatMessage","undefined","ref","url","handleBlur","handleChange","handleFocus","urlPlaceholder","EditableURLBase"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\nimport TextInput from '../../components/text-input/TextInput';\nimport commonMessages from '../../common/messages';\n\nimport messages from './messages';\n\nconst VALUE_MISSING = 'valueMissing';\nconst TYPE_MISMATCH = 'typeMismatch';\n\nconst errorMap = {\n    [VALUE_MISSING]: <FormattedMessage {...commonMessages.requiredFieldError} />,\n    [TYPE_MISMATCH]: <FormattedMessage {...commonMessages.invalidURLError} />,\n};\n\ntype Props = {\n    intl: Object,\n    onValidURLChange: Function,\n    value: string,\n};\n\ntype State = {\n    error: '' | $Keys<typeof errorMap>,\n    value: string,\n};\n\nclass EditableURL extends React.Component<Props, State> {\n    state = {\n        error: '',\n        value: this.props.value,\n    };\n\n    componentDidUpdate({ value: prevValue }: Props) {\n        const { value } = this.props;\n        if (prevValue !== value) {\n            this.setState({ value });\n        }\n    }\n\n    inputEl: ?HTMLInputElement;\n\n    handleBlur = (): void => {\n        if (!this.inputEl) {\n            return;\n        }\n\n        const { valid, valueMissing } = this.inputEl.validity;\n        if (!valid) {\n            this.setState({\n                error: valueMissing ? VALUE_MISSING : TYPE_MISMATCH,\n            });\n            return;\n        }\n\n        this.props.onValidURLChange(this.state.value);\n    };\n\n    handleChange = (event: SyntheticEvent<HTMLInputElement>): void => {\n        this.setState({ value: event.currentTarget.value });\n    };\n\n    handleFocus = (): void => {\n        this.setState({ error: '' });\n    };\n\n    render() {\n        const {\n            intl: { formatMessage },\n        } = this.props;\n        const { error, value } = this.state;\n\n        return (\n            <TextInput\n                className=\"url-input\"\n                error={error ? errorMap[error] : undefined}\n                hideLabel\n                inputRef={ref => {\n                    this.inputEl = ref;\n                }}\n                isRequired\n                label={formatMessage(messages.url)}\n                onBlur={this.handleBlur}\n                onChange={this.handleChange}\n                onFocus={this.handleFocus}\n                placeholder={formatMessage(messages.urlPlaceholder)}\n                type=\"url\"\n                value={value}\n            />\n        );\n    }\n}\n\nexport { EditableURL as EditableURLBase, VALUE_MISSING, TYPE_MISMATCH };\nexport default injectIntl(EditableURL);\n"]},"metadata":{},"sourceType":"module"}