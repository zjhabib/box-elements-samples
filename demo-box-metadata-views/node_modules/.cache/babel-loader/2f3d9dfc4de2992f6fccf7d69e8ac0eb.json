{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport uniqueId from 'lodash/uniqueId';\nimport { Editor } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\nimport Tooltip from '../tooltip';\nimport commonMessages from '../../common/messages';\nimport './DraftJSEditor.scss';\nvar OptionalFormattedMessage = function OptionalFormattedMessage() {\n  return React.createElement(\"span\", {\n    className: \"bdl-Label-optional\"\n  }, \"(\", React.createElement(FormattedMessage, commonMessages.optional), \")\");\n};\nvar DraftJSEditor = /*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DraftJSEditor, _React$Component);\n  function DraftJSEditor() {\n    var _getPrototypeOf2;\n    var _this;\n    _classCallCheck(this, DraftJSEditor);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DraftJSEditor)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (editorState) {\n      var onChange = _this.props.onChange;\n      onChange(editorState);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (editorState) {\n      var onBlur = _this.props.onBlur;\n      onBlur(editorState);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleReturn\", function (event) {\n      var _this$props = _this.props,\n        onReturn = _this$props.onReturn,\n        inputProps = _this$props.inputProps;\n      if (onReturn && !inputProps['aria-activedescendant']) {\n        // Return 'handled' tells DraftJS Editor to not handle return key event,\n        // return 'not-handled' tells DraftJS Editor to continue handle the return key event.\n        // We encapsulate this DraftJS Editor specific contract here, and use true/fase\n        // to indicate whether to let DraftJS Editor handle return event or not in the upper level.\n        return onReturn(event) ? 'handled' : 'not-handled';\n      }\n      return 'not-handled';\n    });\n    _defineProperty(_assertThisInitialized(_this), \"labelID\", uniqueId('label'));\n    return _this;\n  }\n  _createClass(DraftJSEditor, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        editorState = _this$props2.editorState,\n        error = _this$props2.error,\n        hideLabel = _this$props2.hideLabel,\n        inputProps = _this$props2.inputProps,\n        isDisabled = _this$props2.isDisabled,\n        isRequired = _this$props2.isRequired,\n        label = _this$props2.label,\n        onFocus = _this$props2.onFocus,\n        placeholder = _this$props2.placeholder;\n      var handleBlur = this.handleBlur,\n        handleChange = this.handleChange;\n      var classes = classNames({\n        'draft-js-editor': true,\n        'is-disabled bdl-is-disabled': isDisabled,\n        'show-error': !!error\n      });\n      var a11yProps = {};\n      if (inputProps.role) {\n        a11yProps = {\n          ariaActiveDescendantID: inputProps['aria-activedescendant'],\n          ariaAutoComplete: inputProps['aria-autocomplete'],\n          ariaExpanded: inputProps['aria-expanded'],\n          ariaOwneeID: inputProps['aria-owns'],\n          role: inputProps.role\n        };\n      }\n      return React.createElement(\"div\", {\n        className: classes\n      }, React.createElement(\"span\", {\n        className: classNames('bdl-Label', {\n          'accessibility-hidden': hideLabel\n        }),\n        id: this.labelID\n      }, label, !isRequired && React.createElement(OptionalFormattedMessage, null)), React.createElement(Tooltip, {\n        isShown: !!error,\n        position: \"bottom-left\",\n        text: error ? error.message : '',\n        theme: \"error\"\n      }, React.createElement(\"div\", null, React.createElement(Editor, _extends({}, a11yProps, {\n        ariaLabelledBy: this.labelID,\n        editorState: editorState,\n        handleReturn: this.handleReturn,\n        onBlur: handleBlur,\n        onChange: handleChange,\n        onFocus: onFocus,\n        placeholder: placeholder,\n        readOnly: isDisabled,\n        stripPastedStyles: true\n      })))));\n    }\n  }]);\n  return DraftJSEditor;\n}(React.Component);\n_defineProperty(DraftJSEditor, \"defaultProps\", {\n  inputProps: {},\n  isRequired: false,\n  isFocused: false\n});\nexport default DraftJSEditor;","map":{"version":3,"sources":["../../../src/components/draft-js-editor/DraftJSEditor.js"],"names":["React","FormattedMessage","classNames","uniqueId","Editor","Tooltip","commonMessages","OptionalFormattedMessage","optional","DraftJSEditor","Component","inputProps","isRequired","isFocused","editorState","onChange","props","onBlur","event","onReturn","error","hideLabel","isDisabled","label","onFocus","placeholder","handleBlur","handleChange","classes","a11yProps","role","ariaActiveDescendantID","ariaAutoComplete","ariaExpanded","ariaOwneeID","labelID","message","handleReturn"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport uniqueId from 'lodash/uniqueId';\n\nimport { Editor } from 'draft-js';\nimport type { EditorState } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\n\nimport Tooltip from '../tooltip';\n\nimport commonMessages from '../../common/messages';\nimport './DraftJSEditor.scss';\n\nconst OptionalFormattedMessage = () => (\n    <span className=\"bdl-Label-optional\">\n        (<FormattedMessage {...commonMessages.optional} />)\n    </span>\n);\ntype Props = {\n    editorState: EditorState,\n    error?: ?Object,\n    hideLabel?: boolean,\n    inputProps: Object,\n    isDisabled?: boolean,\n    isRequired?: boolean,\n    label: React.Node,\n    onBlur: Function,\n    onChange: Function,\n    onFocus: Function,\n    onReturn?: Function,\n    placeholder?: string,\n};\n\nclass DraftJSEditor extends React.Component<Props> {\n    static defaultProps = {\n        inputProps: {},\n        isRequired: false,\n        isFocused: false,\n    };\n\n    /**\n     * Calls onChange handler passed in\n     * @param {EditorState} editorState The new/updated editor state\n     * @returns {void}\n     */\n    handleChange = (editorState: EditorState) => {\n        const { onChange } = this.props;\n\n        onChange(editorState);\n    };\n\n    handleBlur = (editorState: EditorState) => {\n        const { onBlur } = this.props;\n\n        onBlur(editorState);\n    };\n\n    /**\n     * Event handler which being passed to 'handleReturn' prop of DraftJSEditor\n     * This gives consumer the ability to handle return key event before DraftJSEditor handles it.\n     * @param {SyntheticKeyboardEvent} event\n     * @returns {string}\n     */\n    handleReturn = (event: SyntheticKeyboardEvent<>) => {\n        const { onReturn, inputProps } = this.props;\n\n        if (onReturn && !inputProps['aria-activedescendant']) {\n            // Return 'handled' tells DraftJS Editor to not handle return key event,\n            // return 'not-handled' tells DraftJS Editor to continue handle the return key event.\n            // We encapsulate this DraftJS Editor specific contract here, and use true/fase\n            // to indicate whether to let DraftJS Editor handle return event or not in the upper level.\n            return onReturn(event) ? 'handled' : 'not-handled';\n        }\n\n        return 'not-handled';\n    };\n\n    labelID = uniqueId('label');\n\n    render() {\n        const {\n            editorState,\n            error,\n            hideLabel,\n            inputProps,\n            isDisabled,\n            isRequired,\n            label,\n            onFocus,\n            placeholder,\n        } = this.props;\n\n        const { handleBlur, handleChange } = this;\n\n        const classes = classNames({\n            'draft-js-editor': true,\n            'is-disabled bdl-is-disabled': isDisabled,\n            'show-error': !!error,\n        });\n\n        let a11yProps = {};\n        if (inputProps.role) {\n            a11yProps = {\n                ariaActiveDescendantID: inputProps['aria-activedescendant'],\n                ariaAutoComplete: inputProps['aria-autocomplete'],\n                ariaExpanded: inputProps['aria-expanded'],\n                ariaOwneeID: inputProps['aria-owns'],\n                role: inputProps.role,\n            };\n        }\n\n        return (\n            <div className={classes}>\n                <span className={classNames('bdl-Label', { 'accessibility-hidden': hideLabel })} id={this.labelID}>\n                    {label}\n                    {!isRequired && <OptionalFormattedMessage />}\n                </span>\n\n                <Tooltip isShown={!!error} position=\"bottom-left\" text={error ? error.message : ''} theme=\"error\">\n                    {/* need div so tooltip can set aria-describedby */}\n                    <div>\n                        <Editor\n                            {...a11yProps}\n                            ariaLabelledBy={this.labelID}\n                            editorState={editorState}\n                            handleReturn={this.handleReturn}\n                            onBlur={handleBlur}\n                            onChange={handleChange}\n                            onFocus={onFocus}\n                            placeholder={placeholder}\n                            readOnly={isDisabled}\n                            stripPastedStyles\n                        />\n                    </div>\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nexport default DraftJSEditor;\n"]},"metadata":{},"sourceType":"module"}