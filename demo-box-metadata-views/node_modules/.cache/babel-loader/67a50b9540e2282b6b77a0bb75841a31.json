{"ast":null,"code":"function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport { PLACEHOLDER_USER, VERSION_DELETE_ACTION, VERSION_PROMOTE_ACTION, VERSION_RESTORE_ACTION, VERSION_UPLOAD_ACTION } from '../../../constants';\nvar getVersionAction = function getVersionAction(_ref) {\n  var restored_at = _ref.restored_at,\n    trashed_at = _ref.trashed_at,\n    version_promoted = _ref.version_promoted;\n  var action = VERSION_UPLOAD_ACTION;\n  if (trashed_at) {\n    action = VERSION_DELETE_ACTION;\n  }\n  if (restored_at) {\n    action = VERSION_RESTORE_ACTION;\n  }\n  if (version_promoted) {\n    action = VERSION_PROMOTE_ACTION;\n  }\n  return action;\n};\nvar getVersionUser = function getVersionUser(_ref2) {\n  var modified_by = _ref2.modified_by,\n    restored_by = _ref2.restored_by,\n    trashed_by = _ref2.trashed_by,\n    uploader_display_name = _ref2.uploader_display_name;\n  var _ref3 = restored_by || trashed_by || modified_by || PLACEHOLDER_USER,\n    name = _ref3.name,\n    id = _ref3.id,\n    rest = _objectWithoutProperties(_ref3, [\"name\", \"id\"]);\n  var isAnonymous = id === PLACEHOLDER_USER.id;\n  return _objectSpread({}, rest, {\n    id: id,\n    name: isAnonymous && uploader_display_name ? uploader_display_name : name\n  });\n};\nexport default {\n  getVersionAction: getVersionAction,\n  getVersionUser: getVersionUser\n};","map":{"version":3,"sources":["../../../../src/elements/common/selectors/version.js"],"names":["PLACEHOLDER_USER","VERSION_DELETE_ACTION","VERSION_PROMOTE_ACTION","VERSION_RESTORE_ACTION","VERSION_UPLOAD_ACTION","getVersionAction","restored_at","trashed_at","version_promoted","action","getVersionUser","modified_by","restored_by","trashed_by","uploader_display_name","name","id","rest","isAnonymous"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SACIA,gBADJ,EAEIC,qBAFJ,EAGIC,sBAHJ,EAIIC,sBAJJ,EAKIC,qBALJ,QAMO,oBANP;AAeA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,IAAA,EAA0F;EAAA,IAAvFC,WAAuF,GAAA,IAAA,CAAvFA,WAAuF;IAA1EC,UAA0E,GAAA,IAAA,CAA1EA,UAA0E;IAA9DC,gBAA8D,GAAA,IAAA,CAA9DA,gBAA8D;EAC/G,IAAIC,MAAM,GAAGL,qBAAb;EAEA,IAAIG,UAAJ,EAAgB;IACZE,MAAM,GAAGR,qBAATQ;EACH;EAED,IAAIH,WAAJ,EAAiB;IACbG,MAAM,GAAGN,sBAATM;EACH;EAED,IAAID,gBAAJ,EAAsB;IAClBC,MAAM,GAAGP,sBAATO;EACH;EAED,OAAOA,MAAP;AACH,CAhBD;AAkBA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAA,KAAA,EAKa;EAAA,IAJhCC,WAIgC,GAAA,KAAA,CAJhCA,WAIgC;IAHhCC,WAGgC,GAAA,KAAA,CAHhCA,WAGgC;IAFhCC,UAEgC,GAAA,KAAA,CAFhCA,UAEgC;IADhCC,qBACgC,GAAA,KAAA,CADhCA,qBACgC;EAAA,IAAA,KAAA,GACFF,WAAW,IAAIC,UAAfD,IAA6BD,WAA7BC,IAA4CZ,gBAD1C;IACxBe,IADwB,GAAA,KAAA,CACxBA,IADwB;IAClBC,EADkB,GAAA,KAAA,CAClBA,EADkB;IACXC,IADW,GAAA,wBAAA,CAAA,KAAA,EAAA,CAAA,MAAA,EAAA,IAAA,CAAA,CAAA;EAEhC,IAAMC,WAAW,GAAGF,EAAE,KAAKhB,gBAAgB,CAACgB,EAA5C;EACA,OAAA,aAAA,CAAA,CAAA,CAAA,EAAYC,IAAZ,EAAA;IAAkBD,EAAE,EAAFA,EAAlB;IAAsBD,IAAI,EAAEG,WAAW,IAAIJ,qBAAfI,GAAuCJ,qBAAvCI,GAA+DH;EAA3F,CAAA,CAAA;AACH,CATD;AAWA,eAAe;EACXV,gBAAgB,EAAhBA,gBADW;EAEXK,cAAc,EAAdA;AAFW,CAAf","sourcesContent":["// @flow\nimport {\n    PLACEHOLDER_USER,\n    VERSION_DELETE_ACTION,\n    VERSION_PROMOTE_ACTION,\n    VERSION_RESTORE_ACTION,\n    VERSION_UPLOAD_ACTION,\n} from '../../../constants';\nimport type { BoxItemVersion, User } from '../../../common/types/core';\n\ntype VersionAction =\n    | typeof VERSION_DELETE_ACTION\n    | typeof VERSION_PROMOTE_ACTION\n    | typeof VERSION_RESTORE_ACTION\n    | typeof VERSION_UPLOAD_ACTION;\n\nconst getVersionAction = ({ restored_at, trashed_at, version_promoted }: $Shape<BoxItemVersion>): VersionAction => {\n    let action = VERSION_UPLOAD_ACTION;\n\n    if (trashed_at) {\n        action = VERSION_DELETE_ACTION;\n    }\n\n    if (restored_at) {\n        action = VERSION_RESTORE_ACTION;\n    }\n\n    if (version_promoted) {\n        action = VERSION_PROMOTE_ACTION;\n    }\n\n    return action;\n};\n\nconst getVersionUser = ({\n    modified_by,\n    restored_by,\n    trashed_by,\n    uploader_display_name,\n}: $Shape<BoxItemVersion>): User => {\n    const { name, id, ...rest } = restored_by || trashed_by || modified_by || PLACEHOLDER_USER;\n    const isAnonymous = id === PLACEHOLDER_USER.id;\n    return { ...rest, id, name: isAnonymous && uploader_display_name ? uploader_display_name : name };\n};\n\nexport default {\n    getVersionAction,\n    getVersionUser,\n};\n"]},"metadata":{},"sourceType":"module"}